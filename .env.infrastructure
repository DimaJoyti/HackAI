# HackAI Infrastructure Configuration
# Copy this file to .env and customize for your environment

# =============================================================================
# Core Infrastructure
# =============================================================================

# Server Configuration
PORT=8080
HOST=0.0.0.0
READ_TIMEOUT=30s
WRITE_TIMEOUT=30s
IDLE_TIMEOUT=120s
SHUTDOWN_TIMEOUT=30s

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=hackai
DB_USER=hackai
DB_PASSWORD=hackai_password
DB_SSL_MODE=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
DB_CONN_MAX_LIFETIME=1h
DB_CONN_MAX_IDLE_TIME=30m

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=2
REDIS_MAX_IDLE_TIME=5m
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s

# =============================================================================
# LLM Orchestration
# =============================================================================

# Orchestration Engine
LLM_ORCHESTRATION_ENABLED=true
LLM_MAX_CONCURRENT_CHAINS=100
LLM_MAX_CONCURRENT_GRAPHS=50
LLM_DEFAULT_TIMEOUT=5m
LLM_ENABLE_METRICS=true
LLM_ENABLE_TRACING=true
LLM_PERSISTENCE_TYPE=file
LLM_PERSISTENCE_PATH=./data/llm_states

# =============================================================================
# Vector Database
# =============================================================================

# Vector Database Configuration
VECTOR_DB_ENABLED=true
VECTOR_DB_PROVIDER=postgres
VECTOR_DB_DIMENSIONS=1536
VECTOR_DB_INDEX_TYPE=ivfflat
VECTOR_DB_DISTANCE_METRIC=cosine

# PostgreSQL Vector Configuration
VECTOR_DB_PG_EXTENSION=pgvector
VECTOR_DB_PG_TABLE_PREFIX=llm_
VECTOR_DB_PG_INDEX_METHOD=ivfflat
VECTOR_DB_PG_LISTS=100
VECTOR_DB_PG_PROBE_RATIO=0.1

# =============================================================================
# LLM Providers
# =============================================================================

# OpenAI Configuration
OPENAI_ENABLED=true
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4
OPENAI_REQUESTS_PER_MINUTE=60
OPENAI_TOKENS_PER_MINUTE=100000
OPENAI_MAX_CONCURRENT=10
OPENAI_TIMEOUT=30s
OPENAI_MAX_RETRIES=3

# Anthropic Configuration
ANTHROPIC_ENABLED=false
ANTHROPIC_API_KEY=your-anthropic-api-key-here
ANTHROPIC_BASE_URL=https://api.anthropic.com
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_REQUESTS_PER_MINUTE=60
ANTHROPIC_TOKENS_PER_MINUTE=100000
ANTHROPIC_MAX_CONCURRENT=10
ANTHROPIC_TIMEOUT=30s
ANTHROPIC_MAX_RETRIES=3

# Azure OpenAI Configuration
AZURE_ENABLED=false
AZURE_API_KEY=your-azure-api-key-here
AZURE_BASE_URL=https://your-resource.openai.azure.com
AZURE_MODEL=gpt-4
AZURE_REQUESTS_PER_MINUTE=60
AZURE_TOKENS_PER_MINUTE=100000
AZURE_MAX_CONCURRENT=10
AZURE_TIMEOUT=30s
AZURE_MAX_RETRIES=3

# =============================================================================
# Memory Systems
# =============================================================================

# LLM Memory Configuration
LLM_VECTOR_MEMORY_SIZE=10000
LLM_CONVERSATION_TTL=24h
LLM_EPISODE_RETENTION=168h
LLM_FACT_RETENTION=720h
LLM_MEMORY_PERSISTENCE=true
LLM_MEMORY_PATH=./data/llm_memory
LLM_MEMORY_CACHE_SIZE=1000
LLM_MEMORY_COMPRESSION=true

# =============================================================================
# Security Configuration
# =============================================================================

# Input/Output Validation
LLM_INPUT_VALIDATION=true
LLM_OUTPUT_FILTERING=true
LLM_MAX_PROMPT_LENGTH=10000
LLM_MAX_RESPONSE_LENGTH=50000
LLM_BLOCKED_PATTERNS=ignore.*previous.*instructions,system.*override,developer.*mode
LLM_SENSITIVE_DATA_DETECTION=true
LLM_AUDIT_LOGGING=true
LLM_ENCRYPTION_AT_REST=true
LLM_ENCRYPTION_IN_TRANSIT=true

# =============================================================================
# Rate Limiting
# =============================================================================

# Global Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPS=10
RATE_LIMIT_RPM=600
RATE_LIMIT_RPH=36000
RATE_LIMIT_BURST=20
RATE_LIMIT_CLEANUP=1m

# Per-User Rate Limiting
RATE_LIMIT_PER_USER=true
RATE_LIMIT_USER_RPM=100

# Per-IP Rate Limiting
RATE_LIMIT_PER_IP=true
RATE_LIMIT_IP_RPM=200

# =============================================================================
# Monitoring & Observability
# =============================================================================

# Metrics and Tracing
MONITORING_METRICS=true
MONITORING_TRACING=true
MONITORING_PROFILING=false
MONITORING_INTERVAL=30s
MONITORING_HEALTH_PATH=/health
MONITORING_METRICS_PATH=/metrics

# Alerting
MONITORING_ALERTING=false
MONITORING_ALERT_WEBHOOK=
ALERT_ERROR_RATE=0.05
ALERT_RESPONSE_TIME=5s
ALERT_QUEUE_DEPTH=100
ALERT_MEMORY_USAGE=0.8
ALERT_CPU_USAGE=0.8
ALERT_DISK_USAGE=0.9

# OpenTelemetry Configuration
OTEL_SERVICE_NAME=hackai
OTEL_SERVICE_VERSION=1.0.0
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_EXPORTER_JAEGER_ENDPOINT=http://localhost:14268/api/traces
OTEL_RESOURCE_ATTRIBUTES=service.name=hackai,service.version=1.0.0

# Prometheus Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Jaeger Configuration
JAEGER_ENABLED=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces
JAEGER_SAMPLER_TYPE=const
JAEGER_SAMPLER_PARAM=1

# =============================================================================
# Logging Configuration
# =============================================================================

# Logger Settings
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_ADD_SOURCE=true
LOG_TIME_FORMAT=2006-01-02T15:04:05Z07:00

# File Logging (if LOG_OUTPUT includes file)
LOG_FILE_PATH=./logs/hackai.log
LOG_FILE_MAX_SIZE=100
LOG_FILE_MAX_BACKUPS=3
LOG_FILE_MAX_AGE=28
LOG_FILE_COMPRESS=true

# =============================================================================
# Development & Testing
# =============================================================================

# Development Mode
DEV_MODE=false
DEBUG_ENABLED=false
PROFILE_ENABLED=false

# Testing Configuration
TEST_DATABASE_URL=postgres://hackai:hackai_password@localhost:5432/hackai_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_CLEANUP_AFTER_TESTS=true
TEST_PARALLEL_EXECUTION=true
TEST_RETRY_ATTEMPTS=3
TEST_RETRY_DELAY=1s

# =============================================================================
# CORS Configuration
# =============================================================================

CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_EXPOSED_HEADERS=X-Total-Count,X-Rate-Limit-Remaining
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# =============================================================================
# TLS/SSL Configuration
# =============================================================================

TLS_ENABLED=false
TLS_CERT_FILE=./certs/server.crt
TLS_KEY_FILE=./certs/server.key
TLS_MIN_VERSION=1.2
TLS_CIPHER_SUITES=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305

# =============================================================================
# External Services
# =============================================================================

# Webhook Configuration
WEBHOOK_TIMEOUT=30s
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=1s

# Email Configuration (for notifications)
EMAIL_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@hackai.com

# =============================================================================
# Feature Flags
# =============================================================================

# Feature toggles
FEATURE_ADVANCED_SECURITY=true
FEATURE_DISTRIBUTED_TRACING=true
FEATURE_REAL_TIME_MONITORING=true
FEATURE_AUTO_SCALING=false
FEATURE_MULTI_TENANT=false
FEATURE_EXPERIMENTAL_FEATURES=false
